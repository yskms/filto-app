# 開発フロー（WBS）

## 全体イメージ

| 月 | フェーズ | 内容 |
|----|----------|------|
| 〜1月上旬 | 設計 | 詳細設計FIX |
| 1月 | 基盤 | データ・基盤 |
| 2月 | 実装 | 主要機能 |
| 3月 | 調整 | 品質向上 |
| 4月 | 準備 | リリース準備 |
| 5月 | 🎉 | リリース |

---

## フェーズ0：詳細設計仕上げ（〜1月上旬）

- [x] 画面仕様確定
- [x] API/サービスIF確定
- [x] DB最終確定
- [x] フィルタ条件仕様FIX
- [x] タスク分解＆優先度付け

**ゴール：実装に迷わず入れる状態**

**進捗**:
- 完了: 5/5タスク（100%）

**振り返り**:
- **達成**:
  - UI設計とドキュメント整備完了、主要3画面のUI実装完了
- **学び**: 
  - 実機で動かすと全然違う。気づくことが多く、イメージが具体的になる
  - ドキュメントを書きながら設計の穴に気づける
- **改善**: 
  - 設計を詰めきったつもりでも実装中に曖昧な部分が出てくる
  - ドキュメント更新を後回しにせず、気づいた時点で即更新する

---

## フェーズ1：基盤 & データ層（1月）🏃

**完了済み**:
- [x] プロジェクト初期化
- [x] ナビ（Tabs構成）
- [x] Home画面UI
- [x] Feeds画面UI + 削除機能
- [x] Filters画面UI + 削除機能
- [x] ドキュメント更新
- [x] FilterEdit画面
- [x] サービス層（FilterService）
- [x] DB層（FilterRepository, filters テーブル）
- [x] フィルタロジック実装
- [x] FilterEngine実装
- [x] SQLite設計・CRUD（残りのテーブル）
- [x] RSS取得・パーサ
**追加実装した内容:**
- ✅ ArticleRepository（記事データのDB操作）
- ✅ FeedRepository（フィードデータのDB操作）
- ✅ ArticleService（記事のビジネスロジック）
- ✅ FeedService（RSS自動検出機能付き）
- ✅ RssService（RSS 1.0/2.0/Atom対応、文字エンコーディング自動検出）
- ✅ SyncService（RSS同期処理）
- ✅ 全Service・Repositoryのドキュメント作成

**実装中・今後**:
- [ ] テーマ対応（基礎：Context + 色定義）

**ゴール：データが流れる"骨組み"完成**
→ 1つのRSSフィードを登録して、記事が表示され、フィルタでブロックできる: ✅ 達成！

**進捗**:
- 完了: 13/14タスク（93%）

**振り返り**:
- **達成**:
  - ドキュメントの更新も並行して進めれている
- **学び**: 
  - 自分で実装してみる事で、サービス層、DB層についての理解が深まった
  - RSS取得の実装にかなり工数がかかった。実際のデータは想像以上に多種多様だった。。
- **改善**: 
  - ドキュメントに大幅な刷新が出ている。後半になってからブレないように早めに詰めておく必要がある
  - ボトムタブにFeedsを含めるか否かの検討を行う必要がある
---

## フェーズ2：主要機能UI実装（2月）

- [x] FeedAdd画面
- [x] 複数フィード対応
- [x] フィード切替モーダル（FeedSelectModal）
- [x] 既読管理（markRead実装済み）
- [x] 手動更新（Pull to Refresh）
- [x] 起動時自動更新（動作確認はフェーズ3で行う）
  - Preferencesで設定ON/OFF
  - 最終同期時刻の記録（SyncService）
  - 30分以内は同期スキップ
  - バックグラウンド実行（画面表示を妨げない）
- [x] Settings画面
- [x] Preferences実装（Phase 1完了）
  - 既読の表示方法設定（dim / hide）
  - 起動時自動更新設定（ON / OFF）
  - AsyncStorageでの永続化
  - Home画面との連携
- [x] グローバル許可キーワード画面実装
  - 一覧表示
  - 追加・削除
  - Pro版制限（無料3件）
  - FilterEngineとの統合（Home画面で適用）
- [x] Filters ソート機能
- [x] Feeds ソート機能（ドラッグ&ドロップではなくソートモーダル方式を採用）
- [x] エラーハンドリング（Phase 1: 基礎実装）
  - 統一的なエラー表示（ErrorHandler）
  - FeedAdd: 重複URL登録防止
  - 詳細なエラーハンドリングはPhase 3で実施

**ゴール：主要画面が一通り動く**
→ 自分が毎日使える状態

**進捗**:
- 完了: 12/12タスク（100%） 🎉

---

## フェーズ3：磨き込み & 内部テスト（3月）

### 機能追加・改善
- [ ] Preferences詳細設定（言語・テーマ切替）
- [ ] 記事詳細画面（外部ブラウザで開く）
- [ ] UI/UX調整（アニメーション、色、フォント）
- [ ] 空/初期状態対応（GlobalAllowKeywords画面）

### エラーハンドリング強化
- [ ] オフライン時の挙動改善
  - `@react-native-community/netinfo`導入
  - RSS取得前にネットワークチェック
  - 適切なエラーメッセージ表示
- [ ] 入力バリデーション追加
  - FilterEdit: ブロックキーワード必須チェック
  - GlobalAllowKeywords: 空白/重複チェック
  - 全画面: 入力文字数制限
- [ ] ローディング状態の統一
  - `LoadingOverlay`コンポーネント作成
  - 各画面で統一的に使用
- [ ] 成功フィードバックの追加
  - トースト通知 or Alert統一
  - FilterEdit保存時のフィードバック

### テスト・確認
- [ ] 起動時自動更新の動作確認
- [ ] グローバル許可リストの動作確認
- [ ] Pro版制限の動作確認
- [ ] パフォーマンス調整
- [ ] 多言語対応（ja / en）
- [ ] バグ修正・動作確認

**ゴール：普段使いできる品質**
→ 快適に使える状態
- ボトムタブにFeedsを含めるか否かの検討を行う必要がある

---

## フェーズ4：リリース準備（4月）

- [ ] 総合テスト（全機能動作確認）
- [ ] アプリアイコン
- [ ] スプラッシュスクリーン
- [ ] 実機テスト（iOS + Android）
- [ ] ストア素材作成（スクショ・説明文）
- [ ] プライバシーポリシー
- [ ] 最終バグ修正

**ゴール：申請できる状態**

---

## フェーズ5：リリース（5月）

- [ ] ストア申請（App Store / Google Play）
- [ ] 審査対応
- [ ] 初回リリース
- [ ] 軽微修正

**ゴール：アプリストアからDLして実機で使用する**

---
