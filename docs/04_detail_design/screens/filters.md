# Filters（フィルタ一覧）

## 概要
登録済みフィルタ条件の一覧表示・編集・削除を行う。

## UI構成

### 通常モード
- ヘッダー
  - 左：タイトル（Filters）
  - 右：🗑アイコン（削除モード切替）+ ＋ボタン
- フィルタリスト
  - 1行目：block_keyword（太字）
  - 2行目：allow_keywordがある場合「許可: {allow_keyword}」
  - 右：✏️編集アイコン

### 削除モード
- ヘッダー（切り替わる）
  - 左：キャンセル（青文字）
  - 中央：「N件選択」
  - 右：削除（赤文字、0件時は無効化）
- フィルタリスト
  - タップで選択トグル
  - 選択行は背景色変更（#e3f2fd）
  - スワイプ無効
  - 編集アイコン表示維持（操作は無効）

## 操作

### 通常モード
- 行タップ：編集画面へ遷移（将来実装）
- ✏️アイコン：編集画面へ遷移（将来実装）
- 左スワイプ：削除ボタン表示 → 個別削除
- ＋ボタン：新規追加画面へ遷移
- 🗑アイコン：削除モードに切替

### 削除モード
- 行タップ：選択/選択解除をトグル
- 削除ボタン：確認ダイアログ → 一括削除実行
- キャンセル：選択クリア & 通常モードに戻る

## 削除フロー

### 個別削除（スワイプ）
1. フィルタ行を左にスワイプ
2. 赤背景 + 🗑アイコンの削除ボタン表示
3. 削除ボタンタップ
4. 確認ダイアログ表示
   - タイトル：「フィルタを削除」
   - メッセージ：「このフィルタを削除しますか？」
5. 削除実行 → スワイプを閉じる

### 一括削除（削除モード）
1. 🗑アイコンタップ → 削除モード突入
2. 削除したいフィルタを複数選択
3. 「削除」ボタンタップ
4. 確認ダイアログ表示
   - タイトル：「N件のフィルタを削除しますか？」
   - メッセージ：「この操作は取り消せません」
5. 削除実行 → 通常モードに戻る

## スワイプ削除の挙動

### 基本ルール
- スワイプで削除ボタンを表示できる行は常に1件のみ
- 削除モード中はスワイプ操作を無効化

### スワイプを閉じる条件
スワイプが開いている状態で以下の操作が行われた場合、既存のスワイプを閉じる：
- 同一行のタップ
- 別行のタップ（編集アイコン含む）
- 別行のスワイプ操作
- ＋ボタンタップ
- 🗑アイコンタップ（削除モード突入）
- Tabs 切り替え・画面遷移時
  - Filters 画面のフォーカスが外れるタイミングで開いている Swipeable をすべて close する
  - スワイプ状態は画面間で持ち越さない

### スワイプ中の操作制限
- スワイプが開いている間は以下の操作が無効：
  - 編集アイコンタップ → スワイプを閉じるのみ
  - 行タップ → スワイプを閉じるのみ

## 多言語対応

### allow_keyword の表示
- 日本語：「許可: {allow_keyword}」
- English：「Allow: {allow_keyword}」
- 言語設定は将来的にSettingsから取得予定
- 現在は固定で日本語表示

## 使用データ
- filters

## 使用API / Service
- FilterService.list()
- FilterService.delete(id: number)  // 個別削除
- FilterService.delete(ids: number[])  // 一括削除

## 遷移
- → FilterEdit（編集/新規追加）
- ← Tab

## Swipeable 実装について（注意）

- 現在は react-native-gesture-handler の Swipeable（JS実装）を使用している
- TypeScript 上で deprecated warning が表示されるが、
  動作・保守上の問題はないため当面は許容する
- 将来的に Gesture Handler Reanimated 版 Swipeable へ移行予定