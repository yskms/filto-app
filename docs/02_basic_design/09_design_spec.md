# Filto デザイン仕様書

> ロジック駆動型UIデザイン原則に基づく実装ガイド

参考: [Logic-Driven UI Design](https://coliss.com/articles/build-websites/operation/work/logic-driven-ui-design-tips.html)

---

## 目次

1. [デザイン哲学](#デザイン哲学)
2. [情報階層とレイアウト](#情報階層とレイアウト)
3. [画面別デザイン仕様](#画面別デザイン仕様)
4. [コンポーネント設計](#コンポーネント設計)
5. [インタラクション設計](#インタラクション設計)
6. [視覚デザイン詳細](#視覚デザイン詳細)

---

## デザイン哲学

### 基本原則

**1. タスク完了を最優先**
- ユーザーの主要タスク: 「興味のある記事を見つけて読む」「ノイズをフィルタリングする」
- すべてのUI要素はこのタスク達成を妨げない

**2. 認知負荷を最小化**
- 一度に表示する情報を制限
- 予測可能な配置とパターン
- 明確な視覚的階層

**3. 文脈に応じた情報表示**
- 必要な時に必要な情報だけを表示
- 段階的な情報開示（Progressive Disclosure）

**4. 一貫性とパターンの確立**
- 同じ操作は同じ場所で
- 同じ情報は同じ形式で

---

## 情報階層とレイアウト

### グリッドシステム

**ベースグリッド**
- コンテナ幅: 100%
- 左右マージン: 16px
- カラム間隔: 16px

**垂直リズム**
- ベースライン: 8px
- 主要セクション間: 24px (3 units)
- サブセクション間: 16px (2 units)
- 要素間: 8px (1 unit)

### Zインデックス階層
```typescript
const Z_INDEX = {
  base: 0,           // 通常コンテンツ
  card: 1,           // カード要素
  header: 10,        // ヘッダー
  overlay: 100,      // モーダルオーバーレイ
  modal: 200,        // モーダルコンテンツ
  toast: 300,        // トースト通知
  debug: 9999,       // デバッグ用
};
```

---

## 画面別デザイン仕様

### Home画面：記事一覧

**情報の優先順位**
1. 記事タイトル（最重要 - 太字・大きめ）
2. サムネイル（視覚的アンカー）
3. フィード名 + 時間（コンテキスト情報）

**レイアウト構造**
```
┌────────────────────────────────┐
│ [Feed Name ▼]          [↻]     │ ← 48px高さ固定
├────────────────────────────────┤
│ ┌──┐ Article Title           │
│ │□│ Feed Name • 2h ago       │ ← 72px最小高
│ └──┘                          │
├────────────────────────────────┤
│ ┌──┐ Article Title           │
│ │□│ Feed Name • 1d ago       │
│ └──┘                          │
└────────────────────────────────┘
```

**寸法**
- ヘッダー高さ: 48px（固定）
- セル最小高: 72px
- サムネイル: 56×56px（正方形）
- セル内左右パディング: 16px
- セル内上下パディング: 12px
- サムネイルと本文の間隔: 12px

**視覚的階層**
- タイトル: fontSize 16, fontWeight 600, lineHeight 22
- メタ情報: fontSize 13, fontWeight 400, color #666

**状態デザイン**

既読記事:
```typescript
{
  title: {
    color: '#666',      // 薄いグレー
    opacity: 0.7,       // 70%透明度
  },
  thumbnail: {
    opacity: 0.5,       // 50%透明度
  }
}
```

**空状態**
```
┌────────────────────────────────┐
│                                │
│         [📰 Icon]              │
│                                │
│    まだ記事がありません          │
│                                │
│  フィードを追加して記事を        │
│      取得しましょう             │
│                                │
│    [フィードを追加]             │
│                                │
└────────────────────────────────┘
```

---

### FeedSelect モーダル

**配置原則**
- 画面下部から出現（親指操作範囲）
- 高さ: 画面の60-80%

**レイアウト**
```
┌────────────────────────────────┐
│ フィード選択              [×]  │ ← 48px
├────────────────────────────────┤
│ [●] ALL                        │ ← 56px
├────────────────────────────────┤
│ [ ] 🌐 TechCrunch              │ ← 56px
│ [ ] 📰 Hacker News             │
│ [ ] 🎵 Music Blog              │
├────────────────────────────────┤
│ Manage Feeds →                 │ ← 48px
└────────────────────────────────┘
```

**寸法**
- ヘッダー: 48px
- 各行: 56px
- フッターボタン: 48px
- アイコンサイズ: 24×24px
- チェックマーク: 20×20px

**インタラクション**
- タップ領域: 行全体（48px最小）
- 選択時: 背景色変更 + チェックマーク
- 即座に適用（追加の確認不要）

---

### Filters画面

**ツールバーレイアウト**
```
┌────────────────────────────────┐
│ Filters    [🔄] [🗑] [+]       │ ← 48px
├────────────────────────────────┤
```

**通常モード**
```
│ JavaScript                     │ ← 60px最小
│ 許可: React, TypeScript        │
├────────────────────────────────┤
│ 広告                           │ ← 44px最小
│                                │
├────────────────────────────────┤
```

**削除モード**
```
┌────────────────────────────────┐
│ [キャンセル]  2件選択  [削除]  │ ← 48px
├────────────────────────────────┤
│ [✓] JavaScript                 │ ← 背景色 #e3f2fd
│     許可: React, TypeScript    │
├────────────────────────────────┤
│ [ ] 広告                       │
│                                │
└────────────────────────────────┘
```

**寸法**
- ブロックキーワードのみ: 最小44px
- 許可キーワードあり: 最小60px
- アイコンタップ領域: 44×44px

**視覚的階層**
- ブロックキーワード: fontSize 16, fontWeight 600
- 許可キーワード: fontSize 13, fontWeight 400, color #666

---

### FilterEdit画面

**フォームレイアウト**
```
┌────────────────────────────────┐
│ ← Add Filter                   │ ← 48px
├────────────────────────────────┤
│                                │ ← 16px空白
│ ブロックキーワード              │
│ ┌────────────────────────────┐ │
│ │ 広告                       │ │ ← 48px
│ └────────────────────────────┘ │
│                                │ ← 24px空白
│ 許可キーワード（任意）          │
│ ┌────────────────────────────┐ │
│ │ React                      │ │
│ │ TypeScript                 │ │ ← 最小120px
│ │ Next.js                    │ │
│ └────────────────────────────┘ │
│ 1行に1キーワード                │ ← ヒント文
│                                │ ← 24px空白
│ 対象範囲                        │
│ [✓] タイトル  [✓] 概要         │ ← 44px
│                                │ ← 32px空白
│ ┌────────────────────────────┐ │
│ │        保存する            │ │ ← 48px
│ └────────────────────────────┘ │
│                                │ ← 16px空白
└────────────────────────────────┘
```

**編集モード追加要素**
```
│ ┌────────────────────────────┐ │
│ │        保存する            │ │
│ └────────────────────────────┘ │
│                                │ ← 16px空白
│ ┌────────────────────────────┐ │
│ │        削除する            │ │ ← 赤文字
│ └────────────────────────────┘ │
```

**寸法**
- ラベル - 入力欄間隔: 8px
- セクション間隔: 24px
- 入力欄高さ: 48px
- 複数行入力欄最小高: 120px
- ボタン高さ: 48px
- ボタン間隔: 16px

---

### Settings画面

**リストレイアウト**
```
┌────────────────────────────────┐
│ Settings                       │ ← 48px
├────────────────────────────────┤
│                                │ ← 8px
│ 📚 Feeds 管理             →    │ ← 56px
├────────────────────────────────┤
│ ⚙ Preferences             →    │ ← 56px
├────────────────────────────────┤
```

**寸法**
- セクションヘッダー: 32px
- リスト項目: 56px
- アイコン: 24×24px
- 矢印: 20×20px

---

### Preferences画面

**設定項目レイアウト**
```
┌────────────────────────────────┐
│ ← Preferences                  │ ← 48px
├────────────────────────────────┤
│                                │ ← 8px
│ 🔄 起動時に更新          [ON]  │ ← 56px
├────────────────────────────────┤
│ 👁 既読の表示方法               │ ← 56px
│    薄く表示 ▼                  │
├────────────────────────────────┤
│ 🌟 グローバル許可         →    │ ← 56px
├────────────────────────────────┤
```

**寸法**
- 各設定項目: 56px
- トグルスイッチ: 51×31px
- ドロップダウン: 全幅

---

### Global Allow Keywords画面

**レイアウト**
```
┌────────────────────────────────┐
│ ← グローバル許可キーワード      │ ← 48px
├────────────────────────────────┤
│                                │ ← 16px
│ 無料版: 2/3件                  │ ← バッジ
│                                │
│ すべてのフィルタより優先して    │
│ 許可されるキーワード            │ ← 説明文
│                                │ ← 16px
│ ┌──────────────────────┐ [+]  │ ← 48px
│ │ キーワード            │      │
│ └──────────────────────┘      │
│                                │ ← 16px
│ 自社名                    [×]  │ ← 48px
├────────────────────────────────┤
│ React                     [×]  │ ← 48px
├────────────────────────────────┤
│                                │
│ ┌────────────────────────────┐ │
│ │  Pro版で無制限にする        │ │ ← 48px
│ └────────────────────────────┘ │
└────────────────────────────────┘
```

**空状態**
```
┌────────────────────────────────┐
│                                │
│        [🌟 Icon]               │
│                                │
│  グローバル許可キーワードで     │
│  重要な記事を見逃さない         │
│                                │
│  例: 自社名、注目技術など       │
│                                │
│    [キーワードを追加]           │
│                                │
└────────────────────────────────┘
```

---

## コンポーネント設計

### タイポグラフィシステム
```typescript
const Typography = {
  // ヘッダー
  h1: {
    fontSize: 18,
    fontWeight: '600',
    lineHeight: 24,
    letterSpacing: -0.3,
  },
  
  // 記事タイトル
  title: {
    fontSize: 16,
    fontWeight: '600',
    lineHeight: 22,
    letterSpacing: -0.2,
  },
  
  // 本文
  body: {
    fontSize: 15,
    fontWeight: '400',
    lineHeight: 21,
    letterSpacing: 0,
  },
  
  // メタ情報
  caption: {
    fontSize: 13,
    fontWeight: '400',
    lineHeight: 18,
    letterSpacing: 0,
  },
  
  // ボタンラベル
  button: {
    fontSize: 16,
    fontWeight: '600',
    lineHeight: 22,
    letterSpacing: -0.2,
  },
};
```

### カラーシステム

**Primary Colors**
```typescript
const Colors = {
  // テキスト
  text: {
    primary: '#000000',
    secondary: '#666666',
    disabled: '#999999',
    inverse: '#FFFFFF',
  },
  
  // アクション
  action: {
    primary: '#1976d2',      // 青
    destructive: '#ff3b30',  // 赤
    success: '#4caf50',      // 緑
  },
  
  // 背景
  background: {
    primary: '#FFFFFF',
    secondary: '#F5F5F5',
    elevated: '#FFFFFF',
    overlay: 'rgba(0, 0, 0, 0.5)',
  },
  
  // UI要素
  ui: {
    border: '#E0E0E0',
    divider: '#EEEEEE',
    selected: '#E3F2FD',
    hover: '#F5F5F5',
  },
  
  // 状態
  state: {
    read: '#666666',
    unread: '#000000',
    blocked: '#999999',
  },
};
```

### スペーシングシステム
```typescript
const Spacing = {
  xs: 4,
  sm: 8,
  md: 12,
  lg: 16,
  xl: 24,
  xxl: 32,
  xxxl: 48,
};
```

### ボーダー・角丸
```typescript
const Border = {
  radius: {
    none: 0,
    sm: 4,
    md: 8,
    lg: 12,
    full: 9999,
  },
  
  width: {
    thin: 0.5,
    normal: 1,
    thick: 2,
  },
};
```

---

## インタラクション設計

### タップ領域の最小サイズ

**原則**: すべてのタップ可能要素は最小44×44px
```typescript
const TouchTarget = {
  minimum: 44,      // iOS HIG準拠
  comfortable: 48,  // より快適なサイズ
  spacious: 56,     // リストアイテム等
};
```

### アニメーション

**タイミング関数**
```typescript
const Timing = {
  instant: 0,
  fast: 150,
  normal: 250,
  slow: 350,
  
  easing: {
    standard: 'cubic-bezier(0.4, 0.0, 0.2, 1)',
    decelerate: 'cubic-bezier(0.0, 0.0, 0.2, 1)',
    accelerate: 'cubic-bezier(0.4, 0.0, 1, 1)',
    sharp: 'cubic-bezier(0.4, 0.0, 0.6, 1)',
  },
};
```

**モーション原則**
- 画面遷移: 250ms
- モーダル出現: 250ms decelerate
- ボタンフィードバック: 150ms
- スワイプアクション: リアルタイム追従

### フィードバックパターン

**視覚的フィードバック**
```typescript
// ボタン押下時
{
  opacity: 0.7,           // 透明度変更
  transform: 'scale(0.98)', // わずかに縮小
}

// リストアイテムタップ時
{
  backgroundColor: '#F5F5F5', // 背景色変更
}

// スワイプ中
{
  translateX: swipeDistance,  // 位置変更
  backgroundColor: '#d32f2f',  // 削除色表示
}
```

**触覚フィードバック**
- 重要操作: 中程度の振動
- 削除操作: 強い振動
- 選択操作: 軽い振動

---

## 視覚デザイン詳細

### アイコンシステム

**サイズ規定**
```typescript
const IconSize = {
  xs: 16,   // インライン小アイコン
  sm: 20,   // インラインアイコン
  md: 24,   // 標準アイコン
  lg: 32,   // 大きめアイコン
  xl: 48,   // 特大アイコン
};
```

**使用箇所**
- ヘッダーボタン: 24px
- リストアイテムアイコン: 24px
- サムネイル代替: 24px
- 空状態アイコン: 48px

### シャドウシステム
```typescript
const Shadow = {
  none: {
    shadowColor: 'transparent',
    shadowOffset: { width: 0, height: 0 },
    shadowOpacity: 0,
    shadowRadius: 0,
    elevation: 0,
  },
  
  sm: {
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 1 },
    shadowOpacity: 0.18,
    shadowRadius: 1.0,
    elevation: 1,
  },
  
  md: {
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.20,
    shadowRadius: 2.0,
    elevation: 2,
  },
  
  lg: {
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 0.22,
    shadowRadius: 4.0,
    elevation: 4,
  },
};
```

**適用箇所**
- モーダル: lg
- カード（未使用）: md
- ボタン（未使用）: sm

### 状態デザイン詳細

**既読記事**
- タイトル色: #666
- タイトル透明度: 0.7
- サムネイル透明度: 0.5
- メタ情報: 変更なし

**選択状態（削除モード）**
- 背景色: #e3f2fd
- チェックマーク: 表示
- 他の要素: 変更なし

**スワイプ削除中**
- 背景色: #d32f2f（赤）
- アイコン: 🗑（白）
- translateX: スワイプ距離に応じて

**ローディング状態**
- プレースホルダー: グレー背景
- スケルトン: シマーアニメーション
- テキスト: 「読み込み中...」

---

## レスポンシブ対応

### 画面サイズ対応

**ブレークポイント**
```typescript
const Breakpoints = {
  small: 320,    // 最小サポート
  medium: 375,   // 標準スマートフォン
  large: 414,    // 大型スマートフォン
  xlarge: 768,   // タブレット（将来対応）
};
```

**適用ルール**
- 320-374px: コンパクト表示
- 375-413px: 標準表示（基準）
- 414px以上: 広々表示

### セーフエリア対応
```typescript
import { useSafeAreaInsets } from 'react-native-safe-area-context';

const insets = useSafeAreaInsets();

// 適用例
{
  paddingTop: insets.top,
  paddingBottom: insets.bottom,
}
```

---

## アクセシビリティ

### テキストサイズ対応

- システムフォントサイズに追従
- 最大150%まで対応
- レイアウト崩れを防ぐ

### カラーコントラスト

**WCAG AA準拠**
- 通常テキスト: 4.5:1以上
- 大きいテキスト: 3:1以上
- UI要素: 3:1以上

**検証済みの組み合わせ**
- #000 on #FFF: 21:1 ✓
- #666 on #FFF: 5.74:1 ✓
- #1976d2 on #FFF: 4.57:1 ✓

### スクリーンリーダー対応
```typescript
// アクセシビリティラベル
<TouchableOpacity
  accessible={true}
  accessibilityLabel="フィードを追加"
  accessibilityHint="タップして新しいRSSフィードを登録"
  accessibilityRole="button"
>
```

---

## デザイントークン

### 実装例（TypeScript）
```typescript
// design-tokens.ts
export const DesignTokens = {
  colors: {
    text: {
      primary: '#000000',
      secondary: '#666666',
      disabled: '#999999',
    },
    action: {
      primary: '#1976d2',
      destructive: '#ff3b30',
    },
    background: {
      primary: '#FFFFFF',
      selected: '#E3F2FD',
    },
    ui: {
      border: '#E0E0E0',
    },
  },
  
  spacing: {
    xs: 4,
    sm: 8,
    md: 12,
    lg: 16,
    xl: 24,
    xxl: 32,
  },
  
  typography: {
    h1: {
      fontSize: 18,
      fontWeight: '600',
      lineHeight: 24,
    },
    title: {
      fontSize: 16,
      fontWeight: '600',
      lineHeight: 22,
    },
    body: {
      fontSize: 15,
      fontWeight: '400',
      lineHeight: 21,
    },
    caption: {
      fontSize: 13,
      fontWeight: '400',
      lineHeight: 18,
    },
  },
  
  layout: {
    headerHeight: 48,
    touchTarget: 44,
    listItemHeight: 56,
    articleCellMinHeight: 72,
  },
  
  animation: {
    fast: 150,
    normal: 250,
    slow: 350,
  },
} as const;
```

---

## 実装チェックリスト

### 各画面共通

- [ ] ヘッダー高さ48px固定
- [ ] SafeAreaView使用
- [ ] タップ領域最小44px
- [ ] カラーコントラスト検証済み
- [ ] スクリーンリーダー対応
- [ ] ローディング状態実装
- [ ] エラー状態実装
- [ ] 空状態実装

### Home画面

- [ ] 記事セル高さ最小72px
- [ ] サムネイル56×56px
- [ ] 既読状態のスタイル適用
- [ ] Pull to Refresh実装
- [ ] スクロール時のタブバー非表示

### Filters画面

- [ ] 通常モード/削除モードの切り替え
- [ ] スワイプ削除実装
- [ ] ソートモーダル実装
- [ ] 空状態表示

### Settings系画面

- [ ] リスト項目高さ56px
- [ ] トグルスイッチ動作
- [ ] ドロップダウン選択
- [ ] 設定の永続化

---

## まとめ

このデザイン仕様書は、ロジック駆動型UIデザインの原則に基づいています：

1. **明確な情報階層**: 重要な情報を優先的に表示
2. **予測可能性**: 一貫したパターンとレイアウト
3. **最小限の認知負荷**: 必要な情報だけを適切なタイミングで
4. **タスク完了の最適化**: ユーザーの目的達成を妨げない

すべての実装はこの仕様書に準拠し、ユーザーにとって直感的で使いやすいアプリケーションを目指します。